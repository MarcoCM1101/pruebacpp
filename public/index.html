<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- Stream almacenado en una S# publico-->
    <script
      src="https://streamgnpconnect.s3.us-east-1.amazonaws.com/connect-streams-min.js?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEC4aCXVzLWVhc3QtMSJHMEUCIDnZVJaHKMidVKOKcGmUtyJZV%2F4XJLFS9d1iNtFLu6ruAiEAwZrSrRH%2F5zTIITmI2l6IE1N8cN4P%2BJZAN7A9uBOrB9gqiAMIl%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAAGgwxNjAyNjIxMTM4NjAiDLezK4id9EWL9n9rNircAu29OAjVyZAFcNYyTXG9d2dpxuenRO8c1iBnrUa%2FnZmcsod5SXs7VWSOhqEGt34Qhj6ZlVTYShJAAoUlZtqnwfE7TiX%2Bz330ms9aLzWyMm0b%2FSzgbSF%2FPi9TY4GAksd3mljV8doLIufivAsFQ1%2FqmQsX5u8aoYV%2F1MoTUDHpUqUqu7eEGGHxq8snASihzX0xfYzQZH6hUKhHpOodhemEHGLzA005rI3UJRqG0Ej5YiCsjsNrwWoW9OJFAXSbbztV0l2%2FKRev98yZ%2BsyxLDOO0NXq5ASI%2FapRQcdNn%2F%2FiJ422Ws9yXClOyfs6haeNhd1VnGtWwerBau8bAb%2F9UQ%2F0%2BNNpP0VumDhIUisBHu3WH8TL8d6lEAL8sS8oraUW9sE34HxOUij0z%2FjOaBCWOoOSrssNvaKI0MitGRY2Wllp0%2BsuZOc0a91Dr5OxIrI6mBXiqZFLdFmS2oAtpHhjjTDZq4%2ByBjqHAmN4O1QbyxY3bWEFK9Uue2rG3nppWG9ophobAUuV22z%2B2P%2Bo0EI25f%2FEtvKrWErSHb4WZUF5Wy2Gp%2BF%2B5nzx51GXXqzvlhEKiJJKgozbWYouPEu5%2FttxyNnwVTEW4YfXn0IAq8gmtJImdUlFxHaUPGSumAKs81BtGDWn4CPSbxQq1hsjHHqQQoYOj5H5jEzn%2BGCvxdpwDwyQsm8VC05Ot%2Bscgh6F3rh3pJ1EGSLxUapcpIeiOVUKL8M7EXjRsQdBBLVzOO5BeyHBsaSWxaHqorNmQHHioGCQXKp60eDSrxDC7z8DZwoEMIzUEa2wGixVOBCnuj9SNi5mEsK6RBGP4v8KJlgz91jO&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240514T212954Z&X-Amz-SignedHeaders=host&X-Amz-Expires=14400&X-Amz-Credential=ASIASKUC5ZJCOBNVFUGN%2F20240514%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=8c88030bb52962cc1c1be68495f960525f75f183d6cc026311186033898c114c"
      onload="init()"
    ></script>
    <title>TECMEX</title>
  </head>
  <body onload="init()" bgcolor="black">
    <div id="container-div" style="width: 400px; height: 500px"></div>
    <script type="text/javascript">
      var containerDiv = document.getElementById("container-div");
      var instanceURL = "https://gnpconnect.my.connect.aws/connect/ccp-v2/";

      function init() {
        connect.core.initCCP(containerDiv, {
          ccpUrl: instanceURL,
          loginPopup: true,
          loginPopupAutoClose: true,
          loginOptions: {
            autoClose: true,
            height: 600,
            width: 400,
            top: 0,
            left: 0,
          },
          region: "us-east-1",
          softphone: {
            allowFramedSoftphone: true,
            disableRingtone: false,
            ringtoneUrl: "./ringtone.mp3",
          },
          pageOptions: {
            enableAudioDeviceSettings: false,
            enablePhoneTypeSettings: true,
          },
          ccpAckTimeout: 5000,
          ccpSynTimeout: 3000,
          ccpLoadTimeout: 10000,
        });

        // Obtén los detalles del agente logueado
        connect.agent(function (agent) {
          // Obtén el nombre del agente
          var agentName = agent.getName();
          console.log("Agent Name:", agentName);
        });

        connect.contact(function (contact) {
          contact.onConnected(async function (contact) {
            console.log("**********************************************");

            // Obtén y muestra el ID del contacto
            var cid = contact.getContactId();
            console.log("Contact ID:", cid);

            // Obtén y muestra los atributos del contacto
            var attributeMap = contact.getAttributes();
            console.log("Attributes:", attributeMap);

            // Obtén y muestra el número de teléfono
            if (
              attributeMap["PhoneNumber"] &&
              attributeMap["PhoneNumber"]["value"]
            ) {
              var phoneNumber = attributeMap["PhoneNumber"]["value"];
              console.log("Phone Number:", phoneNumber);
              alert("Phone Number: " + phoneNumber);
            } else {
              console.log("Phone number attribute not found.");
            }

            console.log("**********************************************");
          });
        });
      }
    </script>
  </body>
</html>
