<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- Stream almacenado en una S# publico-->
    <script
      src="https://streamgnpconnect.s3.us-east-1.amazonaws.com/connect-streams-min.js?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEBgaCXVzLWVhc3QtMSJIMEYCIQC5zjgdXwv4Sv%2FcRw55gIQTtRe%2Bycb4ZCQGD6NuSay49gIhAPsUm8%2FB1a%2FhSU13jtcwGsM28S7BZ6QxAzkbD6a4sw8NKogDCIH%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQABoMMTYwMjYyMTEzODYwIgxFvsXfg%2B3kKanHSRAq3AIG0gf9HwYC4fsBKJL024cECxsFRgwLy82CA0nqYnvjjm%2FGcDQ6U0gSBDLIZTEP2VgGKhDoEQKpjz7pBCNwwCzu3OS3cEurqcsfMTGV5REqmsN1Qp8uINeYM7g4qK8iPnt1ry6IletjmOKQb4A7Fkxu2OUwteAuzwM7%2BrUw3nD%2FP%2FoRKCa9tU3SuNVJKBTMBhEJ9yMtvWf9GRuKTH9v2baOiw%2FQ96rc8t1tX0KIYKU7G4%2Fn8BuNYVhNcsQiio2YhvkUGdrWFFJf5%2BidOV9aoa86i3bp%2FvofgeZdIOA%2FPeXJWVOgBHxCDcvuhs9y1UWe2DERGpPuxLUagAm8ODBVIpnvRQyFaM%2Ffhh3bmphE%2BMwLsK%2BpHSwNvA9ucy1gPLUiSwEE5zORdiNnOQNpKKt76GypcfmEMYeeP69Nc5Lb4kY1h3qVq305Pm5gQzbqpK9mfECiaCX8kPPYqAECULEwoMGKsgY6hgJ8KHL8mAGiHy9MKUwncqDrMV54oDTlI4Y8BXAwVQtN9wZmw2nZit656WK4lA7ykmKQK66i5ACZgg4CHDZZlB3pzkzS3iTWkBAk1lao6jthg%2FkbuJDIREMRMiPfViYDvE8halF3EToMduGNWy26MONzrIeNh2A9H0musiKVJRdVe4zmzuHuaxwcY06WlIBFPMlJg0Y0W4yMxniceN%2FgExCUdsBQMouIYtr0rH%2BISpPGdfWYG2xJSmN7RC1g80YHziXutOi5FFPvTKWIPaxtXC0nwjqvEp62il4VxcssErmueL66rqGoizUU1T7K3hiMrGik9h76C5fdiGs7eihlCdxmVPDBnzIO&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240513T232501Z&X-Amz-SignedHeaders=host&X-Amz-Expires=14400&X-Amz-Credential=ASIASKUC5ZJCP62DF4VH%2F20240513%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=1e8f7535e04e0eb4747e4dcc977487cb180ec726b34940cff274599e95a2fe9f"
      onload="init()"
    ></script>
    <title>TECMEX</title>
  </head>
  <body onload="init()" bgcolor="black">
    <div id="container-div" style="width: 400px; height: 500px"></div>
    <script type="text/javascript">
      var containerDiv = document.getElementById("container-div");
      var instanceURL = "https://gnpconnect.my.connect.aws/connect/ccp-v2/";

      function init() {
        connect.core.initCCP(containerDiv, {
          ccpUrl: instanceURL,
          loginPopup: true,
          loginPopupAutoClose: true,
          loginOptions: {
            autoClose: true,
            height: 600,
            width: 400,
            top: 0,
            left: 0,
          },
          region: "us-east-1",
          softphone: {
            allowFramedSoftphone: true,
            disableRingtone: false,
            ringtoneUrl: "./ringtone.mp3",
          },
          pageOptions: {
            enableAudioDeviceSettings: false,
            enablePhoneTypeSettings: true,
          },
          ccpAckTimeout: 5000,
          ccpSynTimeout: 3000,
          ccpLoadTimeout: 10000,
        });

        connect.contact(function (contact) {
          contact.onConnected(async function (contact) {
            console.log("**********************************************");

            // Obtén y muestra el ID del contacto
            var cid = contact.getContactId();
            console.log("Contact ID:", cid);

            // Obtén y muestra los atributos del contacto
            var attributeMap = contact.getAttributes();
            console.log("Attributes:", attributeMap);

            // Obtén y muestra el número de teléfono
            if (
              attributeMap["PhoneNumber"] &&
              attributeMap["PhoneNumber"]["value"]
            ) {
              var phoneNumber = attributeMap["PhoneNumber"]["value"];
              console.log("Phone Number:", phoneNumber);
              alert("Phone Number: " + phoneNumber);
            } else {
              console.log("Phone number attribute not found.");
            }

            // Obtén y muestra el nombre del agente
            if (
              attributeMap["agentName"] &&
              attributeMap["agentName"]["value"]
            ) {
              var agentName = attributeMap["agentName"]["value"];
              console.log("Agent Name:", agentName);
              alert("Agent Name: " + agentName);
            } else {
              console.log("Agent name attribute not found.");
            }

            console.log("**********************************************");
          });
        });
      }
    </script>
  </body>
</html>
