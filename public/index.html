<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- Stream almacenado en una S# publico-->
    <script
      src="https://streamgnpconnect.s3.us-east-1.amazonaws.com/connect-streams-min.js?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEM7%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJHMEUCID%2Fmz8ORFixz%2F8ShZb6JYGJh2pHSY%2FJUbCqsb9j4mhJuAiEAtfU%2FuBl5jtClDRNS51Tk0znp3S88GXq6g2YtZOf%2FGfIq%2FwIINxAAGgwxNjAyNjIxMTM4NjAiDNPYeKwkXSoKnaM5HyrcAmJsUbRbeJA8l%2BLr4wBhL2UdykT7oMJOGRl7jNuK%2BxODVCwYiEcAhhc%2FlZUkd4GEbyROf9HAob9ZWbOwEaVLEAhn1D%2BlbDsfUV3D7KD8fCb76g5t7QQMEZVxv4iT%2FnyKPrb0fnretYj7xZnc%2FihNpbCzllPdNRzCRh%2FF7j%2BWGjDjt%2FcaVDCVyfJNOE1oDaTqzNcJKISj1RBX8ZNxLSycaJz%2B5Ri4ZLUAvPbH9%2FCCblqTFxF4qAwQfJ7a5dAADdmm4k4UrY5o3Jgt1HHDn9v6FwD3MLlu1bJuvHhNU55gvyBL1VQJqJXk7BJmpyb%2BOKDC%2FznrSxYMO0kMlh3CPvTASk88zYRu%2BGxjxIyvXxVkS5RS1CWFJ%2FWoqTECSgNgxOZnimGWK87AgFI8QAiWniViZ5QiEgglmEGQuL%2BfGa9JcfUGZBWzcmB8QS%2B1OkoBHdRH2x8eOEGzrHDVm3eysTDsnPqxBjqHAi4hdle5zFNqh9THJi2plPvO%2B%2BW7EVKCsN9gAqC6KJTiQbi%2FkFnWrrvhfQRGaje%2BRtsF8uulkk%2BB3pvgWFDLM6WIZUIctriIkLZQTicV16Jxmfkg2s%2BjPhUuFa2nlILqCt%2B5b7wZ9OJKFj%2F7NmdZr%2Ffptuf4SukYjTipDLEVbwCA3vMbiaoHjDnrmlCtaFgA9JJKk%2FvfDKyq7YnCfLfxNTgxayP6BLQxuneEY59pP7wLA5ldq3QOS%2BCsgcZHR1pIEltCPBbdzVbWupP4YFmVlYvI9syDWVZyjvnZgga1pdapGQHzD80168GOcmRPlknEA%2FbsRna%2BxhddHVIRsm6NgZI4TGgmEnZH&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240510T212522Z&X-Amz-SignedHeaders=host&X-Amz-Expires=43200&X-Amz-Credential=ASIASKUC5ZJCO4JNGA76%2F20240510%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=8632ce39800b30a4bbbc1110c8e6ffbbedd65e21a470fc2968f05f9501208910"
      onload="init()"
    ></script>
    <title>TECMEX</title>
  </head>
  <!-- Add the call to init() as an onload so it will only run once the page is loaded -->
  <body onload="init()" bgcolor="black">
    <div id="container-div" style="width: 400px; height: 500px"></div>
    <script type="text/javascript">
      var containerDiv = document.getElementById("container-div");
      //URL de la instancia
      var instanceURL = "https://gnpconnect.my.connect.aws/connect/ccp-v2/";
      // initialize the streams api
      function init() {
        // initialize the ccp
        connect.core.initCCP(containerDiv, {
          ccpUrl: instanceURL, // REQUIRED
          loginPopup: true, // optional, defaults to true
          loginPopupAutoClose: true, // optional, defaults to false
          loginOptions: {
            // optional, if provided opens login in new window
            autoClose: true, // optional, defaults to false
            height: 600, // optional, defaults to 578
            width: 400, // optional, defaults to 433
            top: 0, // optional, defaults to 0
            left: 0, // optional, defaults to 0
          },
          region: "us-east-1", // REQUIRED for CHAT, optional otherwise
          softphone: {
            // optional, defaults below apply if not provided
            allowFramedSoftphone: true, // optional, defaults to false
            disableRingtone: false, // optional, defaults to false
            ringtoneUrl: "./ringtone.mp3", // optional, defaults to CCPâ€™s default ringtone if a falsy value is set
          },
          pageOptions: {
            //optional
            enableAudioDeviceSettings: false, //optional, defaults to 'false'
            enablePhoneTypeSettings: true, //optional, defaults to 'true'
          },
          ccpAckTimeout: 5000, //optional, defaults to 3000 (ms)
          ccpSynTimeout: 3000, //optional, defaults to 1000 (ms)
          ccpLoadTimeout: 10000, //optional, defaults to 5000 (ms)
        });

        connect.contact(function (contact) {
          contact.onConnected(async function (contact) {
            cid = contact.getContactId();
            setCallId(cid);
            var attributeMap = contact.getAttributes();
            console.log(attributeMap);
            auth = JSON.stringify(attributeMap["boolAuth"]["value"]);
            props.onChangeAuth(auth);
            console.log(auth);
            clientId = JSON.stringify(attributeMap["clientId"]["value"]);
            props.onChangeClientId(clientId);
            console.log(clientId);
          });
        });
      }
    </script>
  </body>
</html>
